syntax = "proto3";

message Handshake {
    required bytes publicKey = 1;
    required bytes signature = 2;
}

message HandshakeResponse {
    required bytes publicKey = 1;
    required bytes signature = 2;
}

message List {
    message Entry {
        required uint32 index = 1;
        required uint64 size = 2;
        required string name = 3;
    };

    repeated Entry entries = 1;
}

message Progress {
    required uint32 index = 1;
    required uint32 progress = 2;
}

message Chunk {
    required uint32 sequence = 1;
    required bytes chunk = 2;
}

message Packet {
    oneof value {
        Handshake handshake = 1;
        HandshakeResponse handshakeResponse = 2;
        List list = 3;
        Progress progress = 4;
        Chunk chunk = 5;
    }
}